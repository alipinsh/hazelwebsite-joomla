/*
	Copyright (C) 2015 Javier Cruz Lora. All rights reserved
 	@license		GNU General Public License version 2 or later; see LICENSE.txt
*/
(function(c){c.widget("custom.f5multifield",{options:{f5SlideName:"",f5TransTimeSlide:"",f5OnceSlideTransType:"",f5OnceSlideTransTime:"",f5SelectType:"",f5Name:"Layer 1",f5Img:"",f5BackgrColor:"#000000",f5ColorText:"#000000",f5Text:"",f5Html:"",f5SelectVideo:"youtube",f5AlignText:"justify",f5SelectTypeFont:"",f5RatioVideo:"0.5625",f5UrlVideo:"",f5ImgVideo:"",f5WidthBackgr:"50",f5WidthHtml:"50",f5WidthText:"50",f5GoogleTypeFont:"",f5WidthImg:"50",f5WidthVideo:"50",f5HeightBackgr:"50",f5HeightHtml:"50",
f5HeightText:"50",f5HeightImg:"",f5HeightVideo:"",f5PrevImg:"0",f5Autoplay:"0",f5Controls:"0",f5AutoplayNext:"0",f5SizeText:"50",f5OpacityBackgr:"1",f5OpacityImg:"1",f5OpacityText:"1",f5PositionTopSelect:"center",f5PositionTopPx:"",f5PositionLeftSelect:"center",f5PositionLeftPx:"",f5SelectTypeIn:"fade",f5SelectTypeOut:"fade",f5InTimeTransition:"1000",f5InTimeSlide:"1000",f5VisibilityTime:"6000",f5OutTimeTransition:"1000",f5UrlBackgr:"",f5UrlImg:"",f5UrlText:""},_create:function(){var a=this;a.container=
this.element;a.f5FieldsElement="#f5FieldSelectType .f5FieldName .f5FieldSlideName .f5FieldTransTimeSlide .f5FieldOnceSlideTransType .f5FieldOnceSlideTransTime .f5FieldImg .f5FieldBackgrColor .f5FieldColorText .f5FieldImage .f5FieldText .f5FieldHtml .f5FieldSelectVideo .f5FieldAlignText .f5FieldSelectTypeFont .f5FieldRatioVideo .f5FieldUrlVideo .f5FieldImgVideo .f5FieldWidthBackgr .f5FieldWidthHtml .f5FieldWidthImg .f5FieldGoogleTypeFont .f5FieldWidthText .f5FieldWidthVideo .f5FieldHeightBackgr .f5FieldHeightHtml .f5FieldHeightImg .f5FieldHeightText .f5FieldHeightVideo .f5FieldPrevImg .f5FieldAutoplay .f5FieldControls .f5FieldAutoplayNext .f5FieldSizeText .f5FieldOpacityBackgr .f5FieldOpacityImg .f5FieldOpacityText .f5FieldPositionTopPx .f5FieldPositionTopSelect .f5FieldPositionLeftSelect .f5FieldPositionLeftPx .f5FieldSelectTypeIn .f5FieldInTimeTransition .f5FieldInTimeSlide .f5FieldVisibilityTime .f5FieldSelectTypeOut .f5FieldOutTimeTransition .f5FieldUrlBackgr .f5FieldUrlImg .f5FieldUrlText".split(" ");
a.f5SlideName=a.options.f5SlideName;a.f5TransTimeSlide=a.options.f5TransTimeSlide;a.f5OnceSlideTransType=a.options.f5OnceSlideTransType;a.f5OnceSlideTransTime=a.options.f5OnceSlideTransTime;a.f5SelectType=a.options.f5SelectType;a.f5Name=a.options.f5Name;a.f5Img=a.options.f5Img;a.f5BackgrColor=a.options.f5BackgrColor;a.f5ColorText=a.options.f5ColorText;a.f5Text=a.options.f5Text;a.f5Html=a.options.f5Html;a.f5SelectVideo=a.options.f5SelectVideo;a.f5AlignText=a.options.f5AlignText;a.f5SelectTypeFont=
a.options.f5SelectTypeFont;a.f5RatioVideo=a.options.f5RatioVideo;a.f5UrlVideo=a.options.f5UrlVideo;a.f5ImgVideo=a.options.f5ImgVideo;a.f5WidthBackgr=a.options.f5WidthBackgr;a.f5WidthHtml=a.options.f5WidthHtml;a.f5WidthText=a.options.f5WidthText;a.f5GoogleTypeFont=a.options.f5GoogleTypeFont;a.f5WidthImg=a.options.f5WidthImg;a.f5WidthVideo=a.options.f5WidthVideo;a.f5HeightBackgr=a.options.f5HeightBackgr;a.f5HeightHtml=a.options.f5HeightHtml;a.f5HeightText=a.options.f5HeightText;a.f5HeightImg=a.options.f5HeightImg;
a.f5HeightVideo=a.options.f5HeightVideo;a.f5PrevImg=a.options.f5PrevImg;a.f5Autoplay=a.options.f5Autoplay;a.f5Controls=a.options.f5Controls;a.f5AutoplayNext=a.options.f5AutoplayNext;a.f5SizeText=a.options.f5SizeText;a.f5OpacityBackgr=a.options.f5OpacityBackgr;a.f5OpacityImg=a.options.f5OpacityImg;a.f5OpacityText=a.options.f5OpacityText;a.f5PositionTopSelect=a.options.f5PositionTopSelect;a.f5PositionTopPx=a.options.f5PositionTopPx;a.f5PositionLeftSelect=a.options.f5PositionLeftSelect;a.f5PositionLeftPx=
a.options.f5PositionLeftPx;a.f5SelectTypeIn=a.options.f5SelectTypeIn;a.f5SelectTypeOut=a.options.f5SelectTypeOut;a.f5InTimeTransition=a.options.f5InTimeTransition;a.f5InTimeSlide=a.options.f5InTimeSlide;a.f5VisibilityTime=a.options.f5VisibilityTime;a.f5OutTimeTransition=a.options.f5OutTimeTransition;a.f5UrlBackgr=a.options.f5UrlBackgr;a.f5UrlImg=a.options.f5UrlImg;a.f5UrlText=a.options.f5UrlText;var b=[c("#f5FieldSelectType"),c(".f5FieldSelectTypeIn"),c(".f5FieldSelectTypeOut"),c(".f5FieldPositionTopSelect"),
c(".f5FieldPositionLeftSelect"),c(".f5FieldPrevImg"),c(".f5FieldOpacityText"),c(".f5FieldOpacityBackgr"),c(".f5FieldOpacityImg"),c(".f5FieldSelectVideo"),c(".f5FieldAlignText"),c(".f5FieldSelectTypeFont"),c(".f5FieldRatioVideo"),c(".f5FieldAutoplay"),c(".f5FieldControls"),c(".f5FieldAutoplayNext")];c.each(b,function(a,b){b.css("display","block")});a._createInitSlide();c("body").on("change","#f5DivShowSlide :input#f5FieldSelectType",function(){a._changeSeletType(this)});c("body").on("change","#f5DivShowSlide :input.f5FieldPrevImg",
function(){a._changePrevImg(this)});c("body").on("click","#f5DivShowSlide div#f5AddSlideBtn",function(b){a._addSlide(this)});c("body").on("click","#f5DivShowSlide div.f5SaveSlideBtn",function(b){a._saveSlide(this)});c("body").on("click","#f5DivShowSlide div.f5AddElementBtn",function(b){a._addElement(this)});c("body").on("click","#f5DivShowSlide div.f5SaveElementBtn",function(b){a._saveElement(this)});c("body").on("click","#f5DivShowSlide div.f5SaveEditBtn",function(b){a._saveEdit(this)});c("body").on("click",
"#f5DivShowSlide div.f5SlideCancelBtn",function(b){a._slideCancel(this)});c("body").on("click","#f5DivShowSlide div.f5ElementCancelBtn",function(b){a._elementCancel(this)});c("body").on("click","#f5DivShowSlide a.f5LinkElementBtn, #f5DivShowSlide a.f5LinkEditBtn",function(b){a._editElement(this)});c("body").on("click","#f5DivShowSlide div.f5RemoveElementBtn > a",function(b){a._removeElement(this)});c("body").on("click","#f5DivShowSlide div.f5RemoveSlideBtn > a",function(b){a._removeSlide(this)});
c("body").on("click","#f5DivShowSlide div.f5DownSlideBtn > a",function(b){a._downSlide(this)});c("body").on("click","#f5DivShowSlide div.f5UpSlideBtn > a",function(b){a._upSlide(this)});c("body").on("click","#f5DivShowSlide div.f5DownElementBtn > a",function(b){a._downElement(this)});c("body").on("click","#f5DivShowSlide div.f5UpElementBtn > a",function(b){a._upElement(this)});c("#sbox-window").css("overflow","hidden");c("#f5DivShowSlide :input:not(#jform_params_f5multifieldshow)").each(function(a,
b){c(this).attr("class")&&c(this).attr("class")})},_createInitSlide:function(a){var b=this;b.f5ItemsData=b.container.find("#jform_params_f5multifieldshow").val()?c.parseJSON(b.container.find("#jform_params_f5multifieldshow").val()):null;b.ids=0;b.idc=0;b.f5FieldsElementType=[".f5FieldDivImg",".f5FieldDivText",".f5FieldDivVideo",".f5FieldDivHtml",".f5FieldDivBackgr"];null==b.f5ItemsData||""==b.f5ItemsData?(b.f5ItemsData=[],b.container.find("div#f5DivItemSlide").css("display","none"),b.container.find("div#f5DivTypeSlide").css("display",
"none")):(c.each(b.f5ItemsData,function(a,e){b.container.find("div#f5DivTypeSlide").css("display","none");b.container.find("div#f5DivItemSlide").clone().attr("id","f5SlideDiv"+b.ids).appendTo(b.container.find("#f5DivItemSlide").parent()).attr("class","f5SlideDiv");b.idc=0;b.f5ItemsData[b.ids]=[];c.each(e,function(a,d){var e=b.container.find("div#f5SlideDiv"+b.ids);0<b.idc?b.container.find("div#f5DivElements").clone().attr("id","f5DivElements"+b.idc).attr("class","f5Slide").appendTo(e):b.container.find("div#f5SlideDiv"+
b.ids).find("div#f5DivElements").attr("id","f5DivElements"+b.idc).attr("class","f5Slide");var f=b.container.find("#f5SlideDiv"+b.ids).find("div#f5DivElements"+b.idc);c.each(d,function(a,b){var c=a.substring(2);f.find(".f5Field"+c).val("")});f.find("a.f5LinkElementBtn").text("");f.find(":input","div.f5FieldsDivForm").removeAttr("checked").removeAttr("selected").not(":button, :submit, :reset, :hidden, :radio, :checkbox").val("");c.each(b.f5FieldsElementType,function(a,b){f.find(b).css("display","none")});
switch(d.f5SelectType){case "1":f.find("div.f5FiedDivData").find("div.f5FieldDivBackgr").length||(b.container.find("div#f5DivTypeSlide").find("div.f5FieldDivBackgr").clone().prependTo(f.find("div.f5FiedDivData")),SqueezeBox.assign("a.modal",{parse:"rel"}),f.find(".f5FieldDivBackgr").find(":input.f5FieldBackgrColor").minicolors("create"));f.find("div.f5FieldDivBackgr").css("display","block");break;case "2":f.find("div.f5FiedDivData").find("div.f5FieldDivImg").length||(b.container.find("div#f5DivTypeSlide").find("div.f5FieldDivImg").clone().prependTo(f.find("div.f5FiedDivData")),
SqueezeBox.assign("a.modal",{parse:"rel"}),f.find(".f5FieldDivImg").find(":input.f5FieldImg").attr("id","f5FieldImage"+b.ids+b.idc),f.find(".f5FieldDivImg > a.modal").attr("href","index.php?option=com_media&view=images&tmpl=component&asset=com_modules&author=&fieldid=f5FieldImage"+b.ids+b.idc+"&folder=stories"),f.find(".f5FieldDivImg a:last-child").attr("onclick","javascript:document.getElementById('f5FieldImage"+b.ids+b.idc+"').value='';return false;"));f.find("div.f5FieldDivImg").css("display",
"block");break;case "3":f.find("div.f5FiedDivData").find("div.f5FieldDivText").length||(b.container.find("div#f5DivTypeSlide").find("div.f5FieldDivText").clone().prependTo(f.find("div.f5FiedDivData")),SqueezeBox.assign("a.modal",{parse:"rel"}),f.find(".f5FieldDivText").find(".f5FieldColorText").minicolors("create"));f.find("div.f5FieldDivText").css("display","block");break;case "4":f.find("div.f5FiedDivData").find("div.f5FieldDivVideo").length||(b.container.find("div#f5DivTypeSlide").find("div.f5FieldDivVideo").clone().prependTo(f.find("div.f5FiedDivData")),
SqueezeBox.assign("a.modal",{parse:"rel"}),f.find("div.f5FieldDivVideo").find(":input.f5FieldImgVideo").attr("id","f5FieldImgVideo"+b.ids+b.idc),f.find("div.f5FieldDivVideo > a.modal").attr("href","index.php?option=com_media&view=images&tmpl=component&asset=com_modules&author=&fieldid=f5FieldImgVideo"+b.ids+b.idc+"&folder=stories"),f.find("div.f5FieldDivVideo a:last-child").attr("onclick","javascript:document.getElementById('f5FieldImgVideo"+b.ids+b.idc+"').value='';return false;"));f.find("div.f5FieldDivVideo").css("display",
"block");f.find(".autoPlayActive").css("display","none");f.find(".f5FieldDivVideo .autoPlayActive").css("display","block");break;case "5":f.find("div.f5FiedDivData").find("div.f5FieldDivHtml").length||b.container.find("div#f5DivTypeSlide").find("div.f5FieldDivHtml").clone().prependTo(f.find("div.f5FiedDivData")),f.find("div.f5FieldDivHtml").css("display","block")}switch(d.f5PrevImg){case "0":f.find(".autoPlayActive").css("display","none");f.find(".f5FieldDivVideo .autoPlayActive").css("display","block");
break;case "1":case "2":f.find(".autoPlayActive").css("display","block"),f.find(".f5FieldDivVideo .autoPlayActive").css("display","none")}f.find("a.f5LinkElementBtn").text(d.f5Name);0==b.idc&&(b.container.find("div#f5SlideDiv"+b.ids).find("div.f5FieldDivNameSlide").text(d.f5SlideName),f.find(":input.f5FieldSlideName").val(d.f5SlideName));result={};c.each(d,function(a,b){var c=a.substring(2);f.find(".f5Field"+c).val(b);result[a]=b});b.f5ItemsData[b.ids].push(result);b.container.find("div#f5SlideDiv"+
b.ids).css("display","block");b.idc++});b.ids++}),b.container.find("div.f5SlideHeaderBtn, div.f5Slide").css("display","block"))},_changeSeletType:function(a){var b=c(a).closest(".f5FieldsDivForm");b.find("div.f5FiedDivData").css("display","block");c.each(this.f5FieldsElementType,function(a,c){b.find(c).css("display","none")});var d=c(a).closest(".f5SlideDiv").attr("id").substring(10);if(0<c(a).closest(".f5SlideDiv").find("div.f5Slide").last().length)var e=c(a).closest(".f5SlideDiv").find("div.f5Slide").last().attr("id").substring(13);
switch(a.value){case "1":b.find("div.f5FiedDivData").find("div.f5FieldDivBackgr").length||(this.container.find("div#f5DivTypeSlide").find("div.f5FieldDivBackgr").clone().prependTo(b.find("div.f5FiedDivData")),SqueezeBox.assign("a.modal",{parse:"rel"}),b.find(".f5FieldDivBackgr").find(":input.f5FieldBackgrColor").minicolors("create"));b.find("div.f5FieldDivBackgr").css("display","block");"undefined"===typeof e||0==e?b.find("label[for=f5FieldWidthBackgr], .f5FieldWidthBackgr, label[for=f5FieldHeightBackgr], .f5FieldHeightBackgr").css("display",
"none"):b.find("label[for=f5FieldWidthBackgr], .f5FieldWidthBackgr, label[for=f5FieldHeightBackgr], .f5FieldHeightBackgr").css("display","block");break;case "2":b.find("div.f5FiedDivData").find("div.f5FieldDivImg").length||(this.container.find("div#f5DivTypeSlide").find("div.f5FieldDivImg").clone().prependTo(b.find("div.f5FiedDivData")),SqueezeBox.assign("a.modal",{parse:"rel"}),b.find(".f5FieldDivImg").find(":input.f5FieldImg").attr("id","f5FieldImage"+d+e),b.find(".f5FieldDivImg > a.modal").attr("href",
"index.php?option=com_media&view=images&tmpl=component&asset=com_modules&author=&fieldid=f5FieldImage"+d+e+"&folder=stories"),b.find(".f5FieldDivImg a:last-child").attr("onclick","javascript:document.getElementById('f5FieldImage"+d+e+"').value='';return false;"));b.find("div.f5FieldDivImg").css("display","block");"undefined"===typeof e||0==e?b.find("label[for=f5FieldWidthImg], .f5FieldWidthImg").css("display","none"):b.find("label[for=f5FieldWidthImg], .f5FieldWidthImg").css("display","block");break;
case "3":b.find("div.f5FiedDivData").find("div.f5FieldDivText").length||(this.container.find("div#f5DivTypeSlide").find("div.f5FieldDivText").clone().prependTo(b.find("div.f5FiedDivData")),SqueezeBox.assign("a.modal",{parse:"rel"}),b.find(".f5FieldDivText").find(".f5FieldColorText").minicolors("create"));b.find("div.f5FieldDivText").css("display","block");break;case "4":b.find("div.f5FiedDivData").find("div.f5FieldDivVideo").length||(this.container.find("div#f5DivTypeSlide").find("div.f5FieldDivVideo").clone().prependTo(b.find("div.f5FiedDivData")),
SqueezeBox.assign("a.modal",{parse:"rel"}),b.find("div.f5FieldDivVideo").find(":input.f5FieldImgVideo").attr("id","f5FieldImgVideo"+d+e),b.find("div.f5FieldDivVideo > a.modal").attr("href","index.php?option=com_media&view=images&tmpl=component&asset=com_modules&author=&fieldid=f5FieldImgVideo"+d+e+"&folder=stories"),b.find("div.f5FieldDivVideo a:last-child").attr("onclick","javascript:document.getElementById('f5FieldImgVideo"+d+e+"').value='';return false;"));b.find("div.f5FieldDivVideo").css("display",
"block");b.find(".autoPlayActive").css("display","none");b.find(".f5FieldDivVideo .autoPlayActive").css("display","block");"undefined"===typeof e||0==e?b.find("label[for=f5FieldWidthVideo], .f5FieldWidthVideo").css("display","none"):b.find("label[for=f5FieldWidthVideo], .f5FieldWidthVideo").css("display","block");break;case "5":b.find("div.f5FiedDivData").find("div.f5FieldDivHtml").length||this.container.find("div#f5DivTypeSlide").find("div.f5FieldDivHtml").clone().prependTo(b.find("div.f5FiedDivData")),
b.find("div.f5FieldDivHtml").css("display","block"),"undefined"===typeof e||0==e?b.find("label[for=f5FieldWidthHtml], .f5FieldWidthHtml, label[for=f5FieldHeightHtml], .f5FieldHeightHtml").css("display","none"):b.find("label[for=f5FieldWidthHtml], .f5FieldWidthHtml, label[for=f5FieldHeightHtml], .f5FieldHeightHtml").css("display","block")}b.find(":input.f5FieldBackgrColor").val(this.f5BackgrColor);b.find(":input.f5FieldColorText").val(this.f5ColorText);b.find(":input.f5FieldImg").val(this.f5Img);b.find(":input.f5FieldText").val(this.f5Text);
b.find(":input.f5FieldHtml").val(this.f5Html);b.find(":input.f5FieldSelectVideo").val(this.f5SelectVideo);b.find(":input.f5FieldAlignText").val(this.f5AlignText);b.find(":input.f5FieldSelectTypeFont").val(this.f5SelectTypeFont);b.find(":input.f5FieldRatioVideo").val(this.f5RatioVideo);b.find(":input.f5FieldUrlVideo").val(this.f5UrlVideo);b.find(":input.f5FieldImgVideo").val(this.f5ImgVideo);b.find(".minicolors-swatch span").css("background-color","#000000")},_changePrevImg:function(a){switch(a.value){case "0":c(a).parent().find(".autoPlayActive").css("display",
"block");c(a).parent().parent().find(".autoPlayActive");break;case "1":case "2":c(a).parent().find(".autoPlayActive").css("display","none"),c(a).parent().parent().find(".autoPlayActive").css("display","block")}},_addSlide:function(a){var b=this;b.ids=b.container.find("div.f5SlideDiv").length;b.container.find("#f5DivItemSlide").clone().attr("id","f5SlideDiv"+b.ids).appendTo(b.container.find("#f5DivItemSlide").parent()).attr("class","f5SlideDiv");c(".f5DivFields").css("display","none");b.container.find("div#f5SlideDiv"+
b.ids).css("display","block");b.container.find("#f5SlideDiv"+b.ids).find(".f5FieldComun").css("display","none");b.container.find("#f5SlideDiv"+b.ids).find(".f5FieldComun").nextUntil(":not(br)").remove();b.container.find("#f5SlideDiv"+b.ids).find("label[for=f5FieldSlideName], :input.f5FieldSlideName, div.f5FieldsDivForm, label[for=f5FieldTransTimeSlide],  :input.f5FieldTransTimeSlide, label[for=f5FieldOnceSlideTransType], label[for=f5FieldOnceSlideTransTime], :input.f5FieldOnceSlideTransType, :input.f5FieldOnceSlideTransTime").css("display",
"block");b.container.find("#f5SlideDiv"+b.ids).find("a.f5LinkElementBtn").text("Layer 1");var d=0;c.each(b.f5ItemsData,function(a,c){d<parseInt(b.f5ItemsData[a][0].f5SlideName.substring(6))&&"Slide"==b.f5ItemsData[a][0].f5SlideName.substring(0,5)&&(d=parseInt(b.f5ItemsData[a][0].f5SlideName.substring(6)))});d="Slide "+(d+1);b.container.find("#f5SlideDiv"+b.ids).find("div.f5FieldDivNameSlide").text(d);b.container.find("#f5SlideDiv"+b.ids).find(":input.f5FieldSlideName").val(d);b.container.find("#f5SlideDiv"+
b.ids).find(":input.f5FieldName").val(b.f5Name);b._assignFieldDefault(b.container.find("div#f5SlideDiv"+b.ids));b.container.find("div.f5SaveElementBtn, div.f5SaveEditBtn").css("display","none");b.container.find("div.f5SaveSlideBtn").css("display","block");c(":input",".f5SelectTypeDiv").removeAttr("checked").removeAttr("selected").not(":button, :submit, :reset, :hidden, :radio, :checkbox").val("");b.container.find(":input#f5FieldSelectType").val("");b.container.find("#f5SlideDiv"+b.ids).find("div.f5SaveElementBtn, div.f5SaveEditBtn, div.f5ElementCancelBtn, div.f5FiedDivData").css("display",
"none");b.container.find("#f5SlideDiv"+b.ids).find("div.f5SaveSlideBtn, div.f5SlideCancelBtn, div.f5SlideHeaderBtn, div#f5DivElements, div.f5DivFields").css("display","block");b.container.find("div#f5AddSlideBtn").attr("id","f5AddSlideStop");b.container.find("div.f5AddElementBtn").attr("class","f5AddElementStop")},_saveSlide:function(a){this.container.find("div#f5AddSlideStop").attr("id","f5AddSlideBtn");this.container.find("div.f5AddElementStop").attr("class","f5AddElementBtn");this.container.find("#f5SlideDiv"+
this.ids).find("div#f5DivElements").attr("id","f5ElementsDiv0");var b=c(a).closest(".f5SlideDiv").find("#f5ElementsDiv0");this.f5ItemsData[this.ids]=[];result={};c.each(this.f5FieldsElement,function(a,c){var g=c.substring(8),g="f5"+g;0<b.find(c).length&&(result[g]=b.find(c).val())});this.f5ItemsData[this.ids]=[];this.f5ItemsData[this.ids].push(result);b.find("a.f5LinkElementBtn").text(b.find(":input.f5FieldName").val());c(a).closest(".f5SlideDiv").find("div.f5FieldDivNameSlide").text(b.find(":input.f5FieldSlideName").val());
b.attr("class","f5Slide");this.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(this.f5ItemsData));this.container.find("#f5SlideDiv"+this.ids).find("div.f5DivFields").css("display","none");this.ids++},_addElement:function(a){var b=this,d=c(a).closest(".f5SlideDiv");b.idc=c(a).closest(".f5SlideDiv").find("div.f5Slide").last().attr("id").substring(13);b.idc=parseInt(b.idc)+1;b.container.find("div#f5DivElements").clone().attr("id","f5DivElements"+b.idc).attr("class","f5Slide").appendTo(d);
var e=c(a).closest(".f5SlideDiv").attr("id").substring(10);c(".f5DivFields").css("display","none");d.find(":input.f5FieldSlideName").css("display","none");d.find("label[for=f5FieldTransTimeSlide]").css("display","none");d.find(":input.f5FieldTransTimeSlide").css("display","none");d.find("label[for=f5FieldOnceSlideTransType]").css("display","none");d.find(":input.f5FieldOnceSlideTransType").css("display","none");d.find("label[for=f5FieldOnceSlideTransTime]").css("display","none");d.find(":input.f5FieldOnceSlideTransTime").css("display",
"none");d.find(".f5FieldComun").css("display","block");d.find("div#f5DivElements"+b.idc).css("display","block");d.find("#f5DivElements"+b.idc).find("div.f5SaveElementBtn, div.f5ElementCancelBtn, div.f5DivFields, div.f5FieldsDivForm").css("display","block");d.find("#f5DivElements"+b.idc).find("div.f5SaveSlideBtn, div.f5SaveEditBtn, div.f5SlideCancelBtn, div.f5FiedDivData").css("display","none");var g=1,h="";c.each(b.f5ItemsData[e],function(a,c){g<b.f5ItemsData[e][a].f5Name.substring(6)&&"Layer"==b.f5ItemsData[e][a].f5Name.substring(0,
5)&&(g=parseInt(b.f5ItemsData[e][a].f5Name.substring(6)));h="Layer "+(g+1)});b._assignFieldDefault(d.find("div#f5DivElements"+b.idc));d.find("#f5DivElements"+b.idc).find("a.f5LinkElementBtn").text(h);d.find("#f5DivElements"+b.idc).find(":input.f5FieldName").val(h);b.container.find("div#f5AddSlideBtn").attr("id","f5AddSlideStop");b.container.find("div.f5AddElementBtn").attr("class","f5AddElementStop");b.idc++},_saveElement:function(a){this.container.find("div#f5AddSlideStop").attr("id","f5AddSlideBtn");
this.container.find("div.f5AddElementStop").attr("class","f5AddElementBtn");var b=c(a).closest(".f5SlideDiv").attr("id").substring(10);c(a).closest(".f5Slide").attr("id").substring(13);var d=c(a).closest(".f5Slide");result={};c.each(this.f5FieldsElement,function(a,b){var c=b.substring(8),c="f5"+c;0<d.find(b).length&&":input.f5FieldSlideName"!=b&&(result[c]=d.find(b).val())});this.f5ItemsData[b].push(result);this.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(this.f5ItemsData));
c(a).closest(".f5DivFields").css("display","none");d.find("a.f5LinkElementBtn").text(d.find(":input.f5FieldName").val())},_saveEdit:function(a){var b=this;b.container.find("div#f5AddSlideStop").attr("id","f5AddSlideBtn");b.container.find("div.f5AddElementStop").attr("class","f5AddElementBtn");var d=c(a).closest(".f5SlideDiv").attr("id").substring(10),e=c(a).closest(".f5Slide").attr("id").substring(13),g=c(a).closest(".f5Slide");c.each(b.f5FieldsElement,function(a,c){var f=c.substring(8);b.f5ItemsData[d][e]["f5"+
f]=g.find(c).val()});b.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(b.f5ItemsData));c(a).closest(".f5DivFields").css("display","none");g.find("a.f5LinkElementBtn").text(g.find(":input.f5FieldName").val());0==e&&c(a).closest(".f5SlideDiv").find("div.f5FieldDivNameSlide").text(g.find(":input.f5FieldSlideName").val())},_slideCancel:function(a){c(a).closest(".f5SlideDiv").remove();this.container.find("div#f5AddSlideStop").attr("id","f5AddSlideBtn");this.container.find("div.f5AddElementStop").attr("class",
"f5AddElementBtn")},_elementCancel:function(a){var b=this;f5CancelSlideID=c(a).closest(".f5SlideDiv").attr("id").substring(10);f5CancelElementId=c(a).closest(".f5Slide").attr("id").substring(13);var d=c(a).closest(".f5Slide");if(b.f5ItemsData[f5CancelSlideID][f5CancelElementId]){d.find("div.f5DivFields").css("display","none");d.find("a.f5LinkElementBtn").text(b.f5ItemsData[f5CancelSlideID][f5CancelElementId].f5Name);d.find(":input","div.f5FieldsDivForm").removeAttr("checked").removeAttr("selected").not(":button, :submit, :reset, :hidden, :radio, :checkbox").val("");
d.find(":input#f5FieldSelectType").val("");SqueezeBox.assign("a.modal",{parse:"rel"});d.find(":input.f5FieldBackgrColor").minicolors("create");d.find(".f5FieldColorText").minicolors("create");d.find("div.f5FieldsDivForm").css("display","block");c.each(b.f5FieldsElementType,function(a,b){d.find(b).css("display","none")});switch(b.f5ItemsData[f5CancelSlideID][f5CancelElementId].f5SelectType){case "1":d.find("div.f5FieldDivBackgr").css("display","block");break;case "2":d.find("div.f5FieldDivImg").css("display",
"block");break;case "3":d.find("div.f5FieldDivText").css("display","block");break;case "4":d.find("div.f5FieldDivVideo").css("display","block");break;case "5":d.find("div.f5FieldDivHtml").css("display","block")}c.each(b.f5FieldsElement,function(a,c){var h=c.substring(8),h="f5"+h;d.find(c).val(b.f5ItemsData[f5CancelSlideID][f5CancelElementId][h])});c(a).closest(".f5FieldsDivForm").css("display","none")}else d.remove();b.container.find("div#f5AddSlideStop").attr("id","f5AddSlideBtn");b.container.find("div.f5AddElementStop").attr("class",
"f5AddElementBtn")},_editElement:function(a){var b=c(a).closest(".f5Slide").attr("id").substring(13),d=c(a).closest(".f5SlideDiv").attr("id").substring(10),e=c(a).closest(".f5SlideDiv");SqueezeBox.assign("a.modal",{parse:"rel"});e.find("#f5DivElements"+b).find(":input.f5FieldBackgrColor").minicolors("create");e.find("#f5DivElements"+b).find(".f5FieldColorText").minicolors("create");e.find("#f5DivElements"+b).find(":input.f5FieldImg").attr("id","f5FieldImage"+d+"-"+b);e.find("#f5DivElements"+b).find(".f5FieldDivImg > a.modal").attr("href",
"index.php?option=com_media&view=images&tmpl=component&asset=com_modules&author=&fieldid=f5FieldImage"+d+"-"+b+"&folder=stories");e.find("#f5DivElements"+b).find(".f5FieldDivImg a:last-child").attr("onclick","javascript:document.getElementById('f5FieldImage"+d+"-"+b+"').value='';return false;");c(a).closest(".f5Slide").find(":input.f5FieldImg").val(this.f5ItemsData[d][b].f5Img);e.find("#f5DivElements"+b).find(":input.f5FieldImgVideo").attr("id","f5FieldImgVideo"+d+"-"+b);e.find("#f5DivElements"+b).find("div.f5FieldDivVideo > a.modal").attr("href",
"index.php?option=com_media&view=images&tmpl=component&asset=com_modules&author=&fieldid=f5FieldImgVideo"+d+"-"+b+"&folder=stories");e.find("#f5DivElements"+b).find("div.f5FieldDivVideo a:last-child").attr("onclick","javascript:document.getElementById('f5FieldImgVideo"+d+"-"+b+"').value='';return false;");c(a).closest(".f5Slide").find(":input.f5FieldImgVideo").val(this.f5ItemsData[d][b].f5ImgVideo);0==c(a).parent().attr("id").substring(13)?(c(a).parent().find("label[for=f5FieldSlideName], :input.f5FieldSlideName, label[for=f5FieldTransTimeSlide], :input.f5FieldTransTimeSlide, label[for=f5FieldOnceSlideTransType], :input.f5FieldOnceSlideTransType, label[for=f5FieldOnceSlideTransTime], :input.f5FieldOnceSlideTransTime").css("display",
"block"),c(a).parent().find(".f5FieldComun").css("display","none"),c(a).parent().find(".f5FieldComun").nextUntil(":not(br)").remove()):c(a).parent().find(":input.f5FieldSlideName, label[for=f5FieldSlideName], :input.f5FieldTransTimeSlide, label[for=f5FieldTransTimeSlide], :input.f5FieldOnceSlideTransType, label[for=f5FieldOnceSlideTransType], :input.f5FieldOnceSlideTransTime, label[for=f5FieldOnceSlideTransTime]").css("display","none");c(".f5DivFields").css("display","none");c(a).parent().find("div.f5DivFields, div.f5SaveEditBtn, div.f5ElementCancelBtn").css("display",
"block");c(a).parent().find("div.f5SaveSlideBtn, div.f5SaveElementBtn, div.f5SlideCancelBtn").css("display","none");c(a).closest(".f5Slide").find("div.f5FieldsDivForm").css("display","block")},_removeElement:function(a){var b=this,d=c(a).closest(".f5SlideDiv").attr("id").substring(10),e=c(a).closest(".f5Slide").attr("id").substring(13);b.f5ItemsData[d]?1==b.f5ItemsData[d].length?(b.f5ItemsData.splice(d,1),c(a).closest(".f5SlideDiv").remove()):0==e?alert('"The first element can not be deleted"'):(b.f5ItemsData[d].splice(e,
1),c(a).closest(".f5Slide").remove()):(c(a).closest(".f5SlideDiv").remove(),b.f5ItemsData.splice(d,1));b.container.find("div#f5SlideDiv"+d).children("div").each(function(a){0<a&&b.container.find("div#f5SlideDiv"+d).children("div").eq(a).attr("id","f5ElementsDiv"+(parseInt(a)-1))});b.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(b.f5ItemsData));b.container.find("div#f5AddSlideStop").attr("id","f5AddSlideBtn")},_removeSlide:function(a){var b=c(a).closest(".f5SlideDiv").attr("id").substring(10);
this.f5ItemsData[b]?this.f5ItemsData.splice(b,1):c(a).closest(".f5SlideDiv").remove();c(a).closest(".f5SlideDiv").remove();c(".f5SlideDiv").children("div").each(function(a){c(".f5SlideDiv").eq(a).attr("id","f5SlideDiv"+a)});this.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(this.f5ItemsData));this.container.find("div#f5AddSlideStop").attr("id","f5AddSlideBtn")},_downSlide:function(a){var b=this.f5ItemsData.length,d=c(a).closest(".f5SlideDiv").attr("id").substring(0,10);a=parseInt(c(a).closest(".f5SlideDiv").attr("id").substring(10));
var e=d+(parseInt(a)+1),g=d+parseInt(a),h=c("#"+d+a).next("div"),k=c("#"+d+a);a<b-1&&(this.f5ItemsData.move(a,a+1),c("#"+d+a).insertAfter("#"+d+(a+1)),k.attr("id",e),h.attr("id",g),this.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(this.f5ItemsData)))},_upSlide:function(a){var b=c(a).closest(".f5SlideDiv").attr("id").substring(0,10);a=parseInt(c(a).closest(".f5SlideDiv").attr("id").substring(10));var d=b+(parseInt(a)-1),e=b+parseInt(a),g=c("#"+b+a).prev("div"),h=c("#"+b+a);0<
a&&(this.f5ItemsData.move(a,a-1),c("#"+b+a).insertBefore("#"+b+(a-1)),h.attr("id",d),g.attr("id",e),this.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(this.f5ItemsData)))},_downElement:function(a){var b=c(a).closest(".f5SlideDiv").attr("id").substring(0,10),d=c(a).closest(".f5SlideDiv").attr("id").substring(10),e=this.f5ItemsData[d].length,g=c(a).closest(".f5Slide").attr("id").substring(0,13),h=parseInt(c(a).closest(".f5Slide").attr("id").substring(13)),k=g+(parseInt(h)+1),f=
g+parseInt(h),l=c("#"+b+d).find("#"+g+h).next("div"),b=c("#"+b+d).find("#"+g+h);0<h&&(h=parseInt(h));h<e&&0<h&&(this.f5ItemsData[d].move(h,h+1),c(a).closest(".f5Slide").insertAfter(c(a).closest(".f5Slide").next()),b.attr("id",k),l.attr("id",f),this.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(this.f5ItemsData)))},_upElement:function(a){var b=c(a).closest(".f5SlideDiv").attr("id").substring(0,10),d=c(a).closest(".f5SlideDiv").attr("id").substring(10),e=c(a).closest(".f5Slide").attr("id").substring(0,
13),g=parseInt(c(a).closest(".f5Slide").attr("id").substring(13)),h=e+(parseInt(g)-1),k=e+parseInt(g),f=c("#"+b+d).find("#"+e+g).prev("div"),b=c("#"+b+d).find("#"+e+g);1<g&&(this.f5ItemsData[d].move(g,g-1),c(a).closest(".f5Slide").insertBefore(c(a).closest(".f5Slide").prev()),b.attr("id",h),f.attr("id",k),this.container.find("#jform_params_f5multifieldshow").val(JSON.stringify(this.f5ItemsData)))},_assignFieldDefault:function(a){a.find(":input#f5FieldSelectType").val(this.f5SelectType);a.find(":input.f5FieldTransTimeSlide").val(this.f5TransTimeSlide);
a.find(":input.f5FieldOnceSlideTransType").val(this.f5OnceSlideTransType);a.find(":input.f5FieldOnceSlideTransTime").val(this.f5OnceSlideTransTime);a.find(":input.f5FieldImg").val(this.f5Img);a.find(":input.f5FieldBackgrColor").val(this.f5BackgrColor);a.find(".f5FieldColorText").val(this.f5ColorText);a.find(":input.f5FieldText").val(this.f5Text);a.find(":input.f5FieldHtml").val(this.f5Html);a.find(":input.f5FieldSelectVideo").val(this.f5SelectVideo);a.find(":input.f5FieldAlignText").val(this.f5AlignText);
a.find(":input.f5FieldSelectTypeFont").val(this.f5SelectTypeFont);a.find(":input.f5FieldRatioVideo").val(this.f5RatioVideo);a.find(":input.f5FieldUrlVideo").val(this.f5UrlVideo);a.find(":input.f5FieldImgVideo").val(this.f5ImgVideo);a.find(":input.f5FieldWidthBackgr").val(this.f5WidthBackgr);a.find(":input.f5FieldWidthHtml").val(this.f5WidthHtml);a.find(":input.f5FieldWidthImg").val(this.f5WidthImg);a.find(":input.f5FieldGoogleTypeFont").val(this.f5GoogleTypeFont);a.find(":input.f5FieldWidthText").val(this.f5WidthText);
a.find(":input.f5FieldWidthVideo").val(this.f5WidthVideo);a.find(":input.f5FieldHeightBackgr").val(this.f5HeightBackgr);a.find(":input.f5FieldHeightHtml").val(this.f5HeightHtml);a.find(":input.f5FieldHeightImg").val(this.f5HeightImg);a.find(":input.f5FieldHeightText").val(this.f5HeightText);a.find(":input.f5FieldHeightVideo").val(this.f5HeightVideo);a.find(":input.f5FieldPrevImg").val(this.f5PrevImg);a.find(":input.f5FieldAutoplay").val(this.f5Autoplay);a.find(":input.f5FieldControls").val(this.f5Controls);
a.find(":input.f5FieldAutoplayNext").val(this.f5AutoplayNext);a.find(":input.f5FieldSizeText").val(this.f5SizeText);a.find(":input.f5FieldOpacityBackgr").val(this.f5OpacityBackgr);a.find(":input.f5FieldOpacityImg").val(this.f5OpacityImg);a.find(":input.f5FieldOpacityText").val(this.f5OpacityText);a.find(":input.f5FieldPositionTopSelect").val(this.f5PositionTopSelect);a.find(":input.f5FieldPositionTopPx").val(this.f5PositionTopPx);a.find(":input.f5FieldPositionLeftSelect").val(this.f5PositionLeftSelect);
a.find(":input.f5FieldPositionLeftPx").val(this.f5PositionLeftPx);a.find(":input.f5FieldSelectTypeIn").val(this.f5SelectTypeIn);a.find(":input.f5FieldSelectTypeOut").val(this.f5SelectTypeOut);a.find(":input.f5FieldInTimeTransition").val(this.f5InTimeTransition);a.find(":input.f5FieldInTimeSlide").val(this.f5InTimeSlide);a.find(":input.f5FieldVisibilityTime").val(this.f5VisibilityTime);a.find(":input.f5FieldOutTimeTransition").val(this.f5OutTimeTransition);a.find(":input.f5FieldUrlBackgr").val(this.f5UrlBackgr);
a.find(":input.f5FieldUrlImg").val(this.f5UrlImg);a.find(":input.f5FieldUrlText").val(this.f5UrlText)}})})(jQuery);